{"version":3,"sources":["js/helpers/dom.js","js/helpers/date.js","js/setup.js","js/testing-events.js","js/show-details.js","js/fill-events.js","js/now-bar.js","js/details.js","js/highlight.js","js/navigation.js","node_modules/vanilla-ripplejs/ripple.min.js","js/index.js"],"names":["window","$","document","querySelector","bind","$$","querySelectorAll","locale","getLongMonth","Intl","DateTimeFormat","month","format","date","getShortMonth","getShortDay","weekday","getLongDay","setDefaultState","history","pushState","page","setupDates","Date","shortDay","innerHTML","getDate","today","getMonth","getFullYear","events","from_hour","from_minute","to_hour","to_minute","title","showEventDetails","event","e","currentTarget","body","classList","contains","first","getBoundingClientRect","translateY","top","scaleX","width","innerWidth","scaleY","height","details","style","transform","transformOrigin","info","JSON","parse","dataset","toLocaleString","undefined","minimumIntegerDigits","setTimeout","requestAnimationFrame","add","showTodaysEvents","todaysEvents","container","from","to","position","entry","createElement","onclick","stringify","appendChild","showNowBar","hour","getHours","minute","getMinutes","nowBar","setProperty","addEventListener","replaceState","remove","srcElement","getAttribute","highlightEvent","resetHighlights","highlighted","forEach","state","dispatchEvent","Event"],"mappings":"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","file":"js.956ae3f2.map","sourceRoot":"..","sourcesContent":["window.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\n","const locale = \"en-US\";\n\nexport const getLongMonth = date => {\n  return new Intl.DateTimeFormat(locale, { month: \"long\" }).format(date);\n};\nexport const getShortMonth = date => {\n  return new Intl.DateTimeFormat(locale, { month: \"short\" }).format(date);\n};\n\nexport const getShortDay = date => {\n  return new Intl.DateTimeFormat(locale, { weekday: \"short\" }).format(date);\n};\n\nexport const getLongDay = date => {\n  return new Intl.DateTimeFormat(locale, { weekday: \"short\" }).format(date);\n};","import {getShortDay, getLongMonth} from './helpers/date';\n\nexport const setDefaultState = () => {\n  window.history.pushState({ page: \"calendar\" }, \"Calendar\", \"/\");\n};\n\nexport const setupDates = () => {\n  const date = new Date();\n\n  const month = getLongMonth(date);\n  const shortDay = getShortDay(date);\n\n  $(\"#month\").innerHTML = month;\n  $(\"#today-short\").innerHTML = shortDay;\n  $(\"#today-number\").innerHTML = date.getDate();\n};","//for testing\nconst date = new Date();\nlet today = date.getDate() + \"-\" + date.getMonth() + \"-\" + date.getFullYear();\n\nexport const events = {\n  [today]: [\n    {\n      from_hour: 8,\n      from_minute: 20,\n      to_hour: 9,\n      to_minute: 20,\n      title: \"Book flight\"\n    },\n    {\n      from_hour: 14,\n      from_minute: 0,\n      to_hour: 15,\n      to_minute: 0,\n      title: \"Prepare dinner\"\n    },\n    {\n      from_hour: 20,\n      from_minute: 0,\n      to_hour: 21,\n      to_minute: 0,\n      title: \"Pack\"\n    }\n  ]\n};","export const showEventDetails = e => {\n  const event = e.currentTarget;\n  if (document.body.classList.contains(\"closing-event\")) {\n    return false;\n  }\n\n  const first = event.getBoundingClientRect();\n\n  const translateY = first.top;\n  const scaleX = first.width / window.innerWidth;\n  const scaleY = first.height / 150;\n\n  // Invert.\n  details.style.transform = `scaleX(${scaleX}) scaleY(${scaleY}) translateX(33px) translateY(${translateY}px)`;\n  details.style.transformOrigin = `center ${translateY}px`;\n\n  const info = JSON.parse(event.dataset.event);\n\n  //set event details\n  details.querySelector(\"#details-name\").innerHTML = info.title;\n  const from_minute = info.from_minute.toLocaleString(undefined, {\n    minimumIntegerDigits: 2\n  });\n  const to_minute = info.to_minute.toLocaleString(undefined, {\n    minimumIntegerDigits: 2\n  });\n  details.querySelector(\"#details-hour\").innerHTML = `Today<br>${\n    info.from_hour\n  }:${from_minute} - ${info.to_hour}:${to_minute}`;\n  details.querySelector(\"#details-category\").innerHTML = `Events<br><span>\n    joubran.jad@gmail.com\n  </span>`;\n\n  window.history.pushState({ page: \"details\" }, info.title, \"details\");\n\n  setTimeout(() => {\n    requestAnimationFrame(() => {\n      document.body.classList.add(\"show-details\");\n    });\n  }, 40);\n};\n","import {events} from './testing-events';\nimport {showEventDetails} from './show-details';\n\n//move this to worker thread\nexport const showTodaysEvents = () => {\n  const date = new Date();\n  const today =\n    date.getDate() + \"-\" + date.getMonth() + \"-\" + date.getFullYear();\n\n  const todaysEvents = events[today];\n  if (!todaysEvents) {\n    return false;\n  }\n  const container = $(\"#events\");\n  for (const event of todaysEvents) {\n    const from = event.from_hour;\n    const to = event.to_hour;\n\n    const position = from + event.from_minute / 60;\n\n    const height = to - from + (event.to_minute - event.from_minute) / 60;\n\n    const entry = document.createElement(\"div\");\n    entry.classList.add(\"event\");\n    entry.style.height = `calc(${height} * var(--calendar-hour))`;\n    entry.style.transform = `translateY(calc(${position} * var(--calendar-hour))`;\n\n    entry.innerHTML = event.title + '<div class=\"rippleJS\"></div>';\n    entry.onclick = showEventDetails;\n    entry.dataset.event = JSON.stringify(event);\n    container.appendChild(entry);\n  }\n};","export const showNowBar = () => {\n  const date = new Date();\n  const hour = date.getHours();\n  const minute = date.getMinutes();\n\n  const position = hour + minute / 60;\n\n  const nowBar = $(\"#now-bar\");\n  nowBar.style.setProperty('--bar-position', position);\n};\n","$(\"#details-close\").addEventListener(\"click\", () => {\n  window.history.replaceState({ page: \"calendar\" }, \"Calendar\", \"/\");\n\n  const body = document.body;\n  body.classList.add(\"closing-details\");\n  body.classList.remove(\"show-details\");\n  body.addEventListener(\"transitionend\", event => {\n    if (event.srcElement.getAttribute(\"id\") === \"details\") {\n      body.classList.remove(\"closing-details\");\n    }\n  });\n});\n","const highlightEvent = event => {\n  resetHighlights();\n  event.currentTarget.classList.add(\"highlighted\");\n};\n\nconst resetHighlights = () => {\n  const highlighted = $(\".calendar .highlighted\");\n  if (highlighted) {\n    highlighted.classList.remove(\"highlighted\");\n  }\n};\n\n$$(\".hour\").forEach(hour => {\n  hour.addEventListener(\"click\", highlightEvent);\n});\n","window.addEventListener(\"popstate\", event => {\n  if (event.state && event.state.page === \"calendar\") {\n    $(\"#details-close\").dispatchEvent(new Event(\"click\"));\n  }\n  return true;\n});\n","window.addEventListener(\"load\",function(){function n(a){var b=document.createElement(\"style\");b.type=\"text/css\";b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.insertBefore(b,document.head.firstChild)}function g(a,b){var e=b.target,g=e.classList;if(!g.contains(\"rippleJS\"))return!1;var f=e.getAttribute(\"data-event\");if(f&&f!=a)return!1;e.setAttribute(\"data-event\",a);var c=e.getBoundingClientRect(),f=b.offsetX,h;void 0!==f?h=b.offsetY:(f=b.clientX-c.left,\nh=b.clientY-c.top);var d=document.createElement(\"div\"),c=c.width==c.height?1.412*c.width:Math.sqrt(c.width*c.width+c.height*c.height),k=2*c+\"px\";d.style.width=k;d.style.height=k;d.style.marginLeft=-c+f+\"px\";d.style.marginTop=-c+h+\"px\";d.className=\"ripple\";e.appendChild(d);window.setTimeout(function(){d.classList.add(\"held\")},0);var l=\"mousedown\"==a?\"mouseup\":\"touchend\",m=function(a){document.removeEventListener(l,m);d.classList.add(\"done\");window.setTimeout(function(){e.removeChild(d);e.children.length||\n(g.remove(\"active\"),e.removeAttribute(\"data-event\"))},650)};document.addEventListener(l,m)}(function(){var a=document.createElement(\"div\");a.className=\"rippleJS\";document.body.appendChild(a);var b=\"absolute\"==window.getComputedStyle(a).position;document.body.removeChild(a);return b})()||n('/*rippleJS*/.rippleJS,.rippleJS.fill::after{position:absolute;top:0;left:0;right:0;bottom:0}.rippleJS{display:block;overflow:hidden;border-radius:inherit;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.rippleJS.fill::after{content:\"\"}.rippleJS.fill{border-radius:1000000px}.rippleJS .ripple{position:absolute;border-radius:100%;background:currentColor;opacity:.2;width:0;height:0;-webkit-transition:-webkit-transform .4s ease-out,opacity .4s ease-out;transition:transform .4s ease-out,opacity .4s ease-out;-webkit-transform:scale(0);transform:scale(0);pointer-events:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rippleJS .ripple.held{opacity:.4;-webkit-transform:scale(1);transform:scale(1)}.rippleJS .ripple.done{opacity:0}');\ndocument.addEventListener(\"mousedown\",function(a){0==a.button&&g(a.type,a)});document.addEventListener(\"touchstart\",function(a){for(var b=0;b<a.changedTouches.length;++b)g(a.type,a.changedTouches[b])})});\n","import \"./helpers/dom\";\n\nimport { setDefaultState, setupDates } from \"./setup\";\nimport { showTodaysEvents } from \"./fill-events\";\nimport { showNowBar } from \"./now-bar\";\nimport \"./details\";\nimport \"./highlight\";\nimport \"./navigation\";\nimport \"./calendars\";\n// import \"./zoom\";\nimport \"./../node_modules/vanilla-ripplejs/ripple.min\";\n\nsetDefaultState();\n\nsetupDates();\n\nshowTodaysEvents();\n\nshowNowBar();\n"]}
{"version":3,"sources":["js/helpers/dom.js","js/helpers/date.js","js/setup.js","js/testing-events.js","js/show-details.js","js/fill-events.js","js/now-bar.js","js/details.js","js/highlight.js","js/navigation.js","node_modules/vanilla-ripplejs/ripple.min.js","js/index.js"],"names":["window","$","document","querySelector","bind","$$","querySelectorAll","locale","getLongMonth","Intl","DateTimeFormat","month","format","date","getShortMonth","getShortDay","weekday","getLongDay","setDefaultState","history","pushState","page","setupDates","Date","shortDay","innerHTML","getDate","today","getMonth","getFullYear","events","from_hour","from_minute","to_hour","to_minute","title","showEventDetails","event","e","currentTarget","body","classList","contains","first","getBoundingClientRect","translateY","top","scaleX","width","innerWidth","scaleY","height","details","style","transform","transformOrigin","info","JSON","parse","dataset","toLocaleString","undefined","minimumIntegerDigits","setTimeout","requestAnimationFrame","add","showTodaysEvents","todaysEvents","container","from","to","position","entry","createElement","onclick","stringify","appendChild","showNowBar","hour","getHours","minute","getMinutes","nowBar","setProperty","addEventListener","replaceState","remove","srcElement","getAttribute","highlightEvent","resetHighlights","highlighted","forEach","state","dispatchEvent","Event"],"mappings":";AAAAA,OAAOC,CAAP,GAAWC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAX;AACAF,OAAOK,EAAP,GAAYH,SAASI,gBAAT,CAA0BF,IAA1B,CAA+BF,QAA/B,CAAZ;;;;;;ACDA,IAAMK,SAAS,OAAf;;AAEO,IAAMC,sCAAe,SAAfA,YAAe,OAAQ;AAClC,SAAO,IAAIC,KAAKC,cAAT,CAAwBH,MAAxB,EAAgC,EAAEI,OAAO,MAAT,EAAhC,EAAmDC,MAAnD,CAA0DC,IAA1D,CAAP;AACD,ACJD,CDEO;AAGA,IAAMC,wCAAgB,SAAhBA,aAAgB,OAAQ;AACnC,ACJK,AEFA,IFEMI,AEFAkB,KHMJ,IAAI3B,KAAKC,cAAT,CAAwBH,MAAxB,EAAgC,EAAEI,KCJZ,EDImB,AGNlB,OHMS,ACJ5BO,EDIJ,AGNIkB,EHMgDxB,MAApD,CAA2DC,IAA3D,ACJsB,CDI7B,ECJmC,AEFL,IAAK;AGArCZ,ANOC,ACJCD,AEFA,ADDF,CFKO,CMLL,IHCMqC,GFEClB,KEFOmB,EFEd,AEFgBC,CFEDnB,CKHjB,EAAoBgE,MLGlB,CAAyB,EAAE/D,AEF3B,MFEiC,CKHnC,CAAqC,OAArC,CLG2B,CKHmB,CLG5C,EAA+C,SKHG,CLGlD,EAA2D,GAA3D;AKFArB,ALGD,AEFC,ADDF,CDCO,GCDDa,ECCAX,GGDGiB,EJAI,ICCEqB,ADDEjB,CIAf,CAAe8D,EHCX,ADDO,CCCO5C,CDDpB,QIAE,AHCI,CGDwB,AHCAC,EGDErB,MAAM,AHChC,CAAiC,SGDT,EAA5B,EAAkD,EHC9C,CAAJ,EAAuD,KGDvD,EAA8D,GAA9D;ANQK,AOTP,AJGI,ADDJ,IFOaN,AOTP0E,ALEF9D,OCCO,CDDCd,ICCR,CDDaa,IKFM,GLEX,KAAiB,CKFvB+D,ELEM,GAAuB5E,KFOR,AEPae,IKFjB,ILEY,CFOtBb,CEPD,EKFoB,CLEqB,GAAzC,GAA+CF,CFOhC,IEPqCgB,GFO7B,QEPwB,EAA3D;AICE,AFHF,AJUE,AOTA6D,AFDK,AJMA,AEFJ,IEJUb,AJMAvD,EKHLkB,GNOC,IMPMtC,ANOFO,KAAKC,IMPM8B,IAAtB,MNOO,CAAwBjC,KKVP,AJMA,CDIjB,EAAgC,EAAES,IKV9B6D,AJMAvD,KDIuC,KKV1B,AJMA,EDIe,CKVT,AJMA,CDIvB,EAAsDV,MAAtD,CAA6DC,IAA7D,CAAP;AMNA2B,ANOD,AOTCH,ACFFrC,AHCE,AJMA,ACHK,CFKA,GELM8B,EGHLjB,AJMAA,CKHD4B,AEJA2C,CDEC7C,KFDO,AJMA,GKHb,CAAe0B,ADHE1C,AJMAA,GKHjB,CAAmB,ACFnB,AFDa,AJMA,CMLOkB,CCFtB,AHCE,AJMA,COPsB,ODEtB,CAA8BwB,ECFhC,CDEE,CAAkC,ACFA,EFIlC,WCFA,CLGCtC,GML0C,ENIhC,EACF,CACP;AIDFa,AFJF,AGEC,ACFC,AHCA,AFIA,ADCIT,CKPN,KCCMM,AHCEyC,AFIAnC,CGDDF,KEJKoD,CHCGhF,AHKE,CCDDwB,ADAZ,EIDF,CAAeiD,AEJX,CHCcP,EFIEnC,CKLDP,EFInB,CAAsB,EDHT,CGDYwD,CHCzB,IGDmB,CAAYxE,IAAZ,CFInB,GHCc,CKL0B,CLKxC,SKLA,EAAoD;AFKpDmB,ANOK,AQXHvC,AHCF,AJMA,ACDI+B,IFKOf,EQXP,AHCE+D,AJMArE,CKHDyE,OLGS,CINCvE,AHKE,EAFf,GGHkBoE,EGDlB,CFIF,CAAsB,AEJAa,MHCP,EAAf,KGDE,CRWsB,AQXY,APOTjF,CKH3B,EAAuC,CEJCkF,APO1B,CAAd,IDIW9E,AQXyB,CAAU,OAAV,CAAlC,CRWsB,CMPwB,MNOhB;AMN9B,AFJJ,AJWE,AOTF,ACFG,APOD,AEFA,ADCIgB,IKJAyD,ENKElE,AEFAqB,EGDAR,CNOC,EELM,CAHX,CFQS5B,CMPC8E,GLGK,CDID7E,CGNGiC,GIHG,EDEhB,CAAiB6C,AHCE1C,GAAzB,GIHI4C,CPSG,CAAwBnF,IMPzB,CAA8B,CNO7B,CCJsBM,CDIU,CMPjC,CNOmCG,CCJxB,CAAjB,CMLsB,EDEwB,CCFlB,GPSsB,KMPhD,EAAuD,ANOlB,EAAhC,EAAsDJ,MAAtD,CAA6DC,IAA7D,CAAP;AMNI2B,AFJC,AJWN,AOTC,ACFA,AHCA,AFIA,ADCIN,AOVN,CTaO,GITMgC,EGELyB,AFDApB,AFIAxB,GKLC,EFIEN,EEJT,ANMe,ECDAE,ADHb,EGDemC,GCGb,ACFgB7E,CDEDqF,AHCEtC,CIHC,EFDEgC,EFIT,CGDX,CAAsB,CHCGhF,IEJI,EAAjC,CFIoCiD,SGDhC,CCFgB,AJGpB,CIHA,GHF8B,SAAnBiB,gBAAmB,GAAM;AEKjC,AFJH,AGEA,ACFD,APOCjE,AEFA,ADCIkC,AOVN,CDDA,GPYI,EGPItB,AGEF8E,AJGEzC,GDCK,GDCX,CGPa,CHODzB,CEFGkB,ECLEpB,AGEjB,EAAiB,EHFJ,ADKQ4B,ECLrB,AHOA,GAAwBxC,CEFT,GAAe,CFE9B,EEFA;AGAC,AFJD,AGEEgF,AFDF,AJMA1F,ACPE,AOJJ,CPGW,EICT,AJOE,CDAA,EGPI0B,ACCAuD,QDAJrE,CCAaZ,CECDwC,CFDG,CJMjB,CGNOf,CHMWD,KMLhB,CHDA,AGCsB6D,CFDT,CAAf,CJMA,EGNmB,CGCjB,ANK4B9D,CMLC,CHD7B,GAAuBX,GHMzB,EGN8Be,IGC5B,IHDuB,EAAvB,GAAyC,GAAzC,GAA+Cf,KAAKgB,WAAL,EADjD;AEKD,ACFE,AFDDqD,AJMAjF,AEFA,ADEI8B,AOXN,CHHA,GLcI,KINKsB,IHMQ,CGNf,CAAa8B,AHKX,IDCF,EAAmB1D,KINnB,CAAyB,GJMzB,GAA+BZ,KAAKa,KINpC,EAA2C6C,AJMZ,EAA/B,MINA;ADCA,AGCD,AFDA,AJMA,AEFCnB,ADEIpB,AOXN,CFCA,AFLO,AJMA,KGGCmC,IDIEd,KAAR,ADEiB,CCFHC,ADAZ,KEJmB,IDIrB,eAAoCP,GCJRpB,GDI5B,ECJqB,CAArB,cDIsDuB,MAAtD,sCAA6FL,UAA7F;ACHA,ADIAO,ADEInB,MENA,CAACkC,GDIGd,CDEK,EAHX,ECCF,CAAcE,GCJd,EAAmB,UDInB,eAA0CV,UAA1C;ACHE,AGCJxC,ALKM6B,GKLH,OAAH,CHDW,CGCC0D,CLKK,CAJb,EEFA,GGCJ,CAAoB,gBAAQ;AHAzB,AGCDd,AJGA,ADEI3C,MCFEqB,CIHD4B,ELKM,ICFE3B,KAAKC,KIHlB,AJGa,CIHS,AJGErB,MAAMsB,CIH9B,EAA+B8B,IJGP,CAAcpD,KAAzB,CAAb,GIHA;AHAA,AGCD,AGdD,ARaI,CKDJ,ALPW,EAeP,GEPI+B,YAAYnE,EAAE,SAAF,CAAlB;AAToC,ADcpC,ADGI8B,aAAW,EADb;AEhBkC,AMFtC,APiBEqB,ADGIpB,UCHI7B,KDGS,CAFf,OCDF,CAAsB,eAAtB,EAAuCsB,SAAvC,GAAmD+B,KAAKrB,KAAxD;ACfoC,ADgBpC,ADGIF,MCHED,KDGO,EAHX,OCAkBwB,KAAKxB,WAAL,CAAiB4B,cAAjB,CAAgCC,SAAhC,EAA2C;AOjBjE,APkBIC,ADGE5B,aAAW,CAJb,YCCsB;ACjBY,ADgB2B,ADK3DC,GCLgB,CAApB,KDKW;AEXX,AMVF,APmBE,ADHE,CAfO,CADE,CAAN,GCmBCD,YAAYsB,KAAKtB,ECTHiC,ODSF,CAAeP,ICTjC,UDSkB,CAA8BC,SAA9B,EAAyC,wGCTzB;AAAA,ADUhCC,UCVSzB,KAAuB,WDUV;AOnB1B,APkB6D,GAAzC,CAAlB;ACRE,ADWFe,UCXQiB,ADWAlE,OCXOkC,MAAMN,ADWrB,CAAsB,QCXpB,ODWF,EAAuCN,SAAvC,iBACE+B,KAAKzB,SADP,SAEIC,WAFJ,WAEqBwB,KAAKvB,OAF1B,SAEqCC,SAFrC;ACVE,AMVJ,UNUUoC,KAAKjC,MAAMJ,OAAjB;ADcFjC,SAAOmB,OAAP,CAAeC,SAAf,CAAyB,EAAEC,MAAM,SAAR,EAAzB,EAA8CmC,KAAKrB,KAAnD,EAA0D,SAA1D;ACZE,AMXJ,UNWUoC,WAAWF,OAAOhC,MAAML,WAAN,GAAoB,EAA5C;ADcF+B,aAAW,YAAM;ACZf,AMZJ,APyBIC,UCbMb,SAASmB,KAAKD,EDaE,ECbP,GAAY,CAAChC,MAAMH,ADaN,SCbA,GAAkBG,MAAML,WAAzB,IAAwC,EAAnE;ADcE9B,eAASsC,IAAT,CAAcC,SAAd,CAAwBwB,GAAxB,CAA4B,cAA5B;ACZF,AMZJ,APyBK,KAFD,KCXMO,QAAQtE,SAASuE,aAAT,CAAuB,KAAvB,CAAd;AACAD,ADaD,GAJD,EAIG,EAJH,KCTQ/B,SAAN,CAAgBwB,GAAhB,CAAoB,OAApB;AACAO,AMZJ,APyBC,CArCM,WCwBGnB,KAAN,CAAYF,MAAZ,aAA6BA,MAA7B;AACAqB,AMhBJ,YNgBUnB,KAAN,CAAYC,SAAZ,wBAA2CiB,QAA3C;;AAEAC,YAAM/C,SAAN,GAAkBY,MAAMF,KAAN,GAAc,8BAAhC;AACAqC,AMdJ,YNcUE,OAAN;AACAF,YAAMb,OAAN,CAActB,KAAd,GAAsBoB,KAAKkB,SAAL,CAAetC,KAAf,CAAtB;AACA+B,AMdJ,gBNccQ,WAAV,CAAsBJ,KAAtB;AACD;AA3BmC,AMctC;ANdsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BrC,CA5BM","file":"js.af975419.map","sourcesContent":["window.$ = document.querySelector.bind(document);\nwindow.$$ = document.querySelectorAll.bind(document);\n","const locale = \"en-US\";\n\nexport const getLongMonth = date => {\n  return new Intl.DateTimeFormat(locale, { month: \"long\" }).format(date);\n};\nexport const getShortMonth = date => {\n  return new Intl.DateTimeFormat(locale, { month: \"short\" }).format(date);\n};\n\nexport const getShortDay = date => {\n  return new Intl.DateTimeFormat(locale, { weekday: \"short\" }).format(date);\n};\n\nexport const getLongDay = date => {\n  return new Intl.DateTimeFormat(locale, { weekday: \"short\" }).format(date);\n};","import {getShortDay, getLongMonth} from './helpers/date';\n\nexport const setDefaultState = () => {\n  window.history.pushState({ page: \"calendar\" }, \"Calendar\", \"/\");\n};\n\nexport const setupDates = () => {\n  const date = new Date();\n\n  const month = getLongMonth(date);\n  const shortDay = getShortDay(date);\n\n  $(\"#month\").innerHTML = month;\n  $(\"#today-short\").innerHTML = shortDay;\n  $(\"#today-number\").innerHTML = date.getDate();\n};","//for testing\nconst date = new Date();\nlet today = date.getDate() + \"-\" + date.getMonth() + \"-\" + date.getFullYear();\n\nexport const events = {\n  [today]: [\n    {\n      from_hour: 8,\n      from_minute: 20,\n      to_hour: 9,\n      to_minute: 20,\n      title: \"Book flight\"\n    },\n    {\n      from_hour: 14,\n      from_minute: 0,\n      to_hour: 15,\n      to_minute: 0,\n      title: \"Prepare dinner\"\n    },\n    {\n      from_hour: 20,\n      from_minute: 0,\n      to_hour: 21,\n      to_minute: 0,\n      title: \"Pack\"\n    }\n  ]\n};","export const showEventDetails = e => {\n  const event = e.currentTarget;\n  if (document.body.classList.contains(\"closing-event\")) {\n    return false;\n  }\n\n  const first = event.getBoundingClientRect();\n\n  const translateY = first.top;\n  const scaleX = first.width / window.innerWidth;\n  const scaleY = first.height / 150;\n\n  // Invert.\n  details.style.transform = `scaleX(${scaleX}) scaleY(${scaleY}) translateX(33px) translateY(${translateY}px)`;\n  details.style.transformOrigin = `center ${translateY}px`;\n\n  const info = JSON.parse(event.dataset.event);\n\n  //set event details\n  details.querySelector(\"#details-name\").innerHTML = info.title;\n  const from_minute = info.from_minute.toLocaleString(undefined, {\n    minimumIntegerDigits: 2\n  });\n  const to_minute = info.to_minute.toLocaleString(undefined, {\n    minimumIntegerDigits: 2\n  });\n  details.querySelector(\"#details-hour\").innerHTML = `Today<br>${\n    info.from_hour\n  }:${from_minute} - ${info.to_hour}:${to_minute}`;\n\n  window.history.pushState({ page: \"details\" }, info.title, \"details\");\n\n  setTimeout(() => {\n    requestAnimationFrame(() => {\n      document.body.classList.add(\"show-details\");\n    });\n  }, 40);\n};","import {events} from './testing-events';\nimport {showEventDetails} from './show-details';\n\n//move this to worker thread\nexport const showTodaysEvents = () => {\n  const date = new Date();\n  const today =\n    date.getDate() + \"-\" + date.getMonth() + \"-\" + date.getFullYear();\n\n  const todaysEvents = events[today];\n  if (!todaysEvents) {\n    return false;\n  }\n  const container = $(\"#events\");\n  for (const event of todaysEvents) {\n    const from = event.from_hour;\n    const to = event.to_hour;\n\n    const position = from + event.from_minute / 60;\n\n    const height = to - from + (event.to_minute - event.from_minute) / 60;\n\n    const entry = document.createElement(\"div\");\n    entry.classList.add(\"event\");\n    entry.style.height = `calc(${height} * var(--calendar-hour))`;\n    entry.style.transform = `translateY(calc(${position} * var(--calendar-hour))`;\n\n    entry.innerHTML = event.title + '<div class=\"rippleJS\"></div>';\n    entry.onclick = showEventDetails;\n    entry.dataset.event = JSON.stringify(event);\n    container.appendChild(entry);\n  }\n};","export const showNowBar = () => {\n  const date = new Date();\n  const hour = date.getHours();\n  const minute = date.getMinutes();\n\n  const position = hour + minute / 60;\n\n  const nowBar = $(\"#now-bar\");\n  nowBar.style.setProperty('--bar-position', position);\n};\n","$(\"#details-close\").addEventListener(\"click\", () => {\n  window.history.replaceState({ page: \"calendar\" }, \"Calendar\", \"/\");\n\n  const body = document.body;\n  body.classList.add(\"closing-details\");\n  body.classList.remove(\"show-details\");\n  body.addEventListener(\"transitionend\", event => {\n    if (event.srcElement.getAttribute(\"id\") === \"details\") {\n      body.classList.remove(\"closing-details\");\n    }\n  });\n});\n","const highlightEvent = event => {\n  resetHighlights();\n  event.currentTarget.classList.add(\"highlighted\");\n};\n\nconst resetHighlights = () => {\n  const highlighted = $(\".calendar .highlighted\");\n  if (highlighted) {\n    highlighted.classList.remove(\"highlighted\");\n  }\n};\n\n$$(\".hour\").forEach(hour => {\n  hour.addEventListener(\"click\", highlightEvent);\n});\n","window.addEventListener(\"popstate\", event => {\n  if (event.state && event.state.page === \"calendar\") {\n    $(\"#details-close\").dispatchEvent(new Event(\"click\"));\n  }\n  return true;\n});\n","window.addEventListener(\"load\",function(){function n(a){var b=document.createElement(\"style\");b.type=\"text/css\";b.styleSheet?b.styleSheet.cssText=a:b.appendChild(document.createTextNode(a));document.head.insertBefore(b,document.head.firstChild)}function g(a,b){var e=b.target,g=e.classList;if(!g.contains(\"rippleJS\"))return!1;var f=e.getAttribute(\"data-event\");if(f&&f!=a)return!1;e.setAttribute(\"data-event\",a);var c=e.getBoundingClientRect(),f=b.offsetX,h;void 0!==f?h=b.offsetY:(f=b.clientX-c.left,\nh=b.clientY-c.top);var d=document.createElement(\"div\"),c=c.width==c.height?1.412*c.width:Math.sqrt(c.width*c.width+c.height*c.height),k=2*c+\"px\";d.style.width=k;d.style.height=k;d.style.marginLeft=-c+f+\"px\";d.style.marginTop=-c+h+\"px\";d.className=\"ripple\";e.appendChild(d);window.setTimeout(function(){d.classList.add(\"held\")},0);var l=\"mousedown\"==a?\"mouseup\":\"touchend\",m=function(a){document.removeEventListener(l,m);d.classList.add(\"done\");window.setTimeout(function(){e.removeChild(d);e.children.length||\n(g.remove(\"active\"),e.removeAttribute(\"data-event\"))},650)};document.addEventListener(l,m)}(function(){var a=document.createElement(\"div\");a.className=\"rippleJS\";document.body.appendChild(a);var b=\"absolute\"==window.getComputedStyle(a).position;document.body.removeChild(a);return b})()||n('/*rippleJS*/.rippleJS,.rippleJS.fill::after{position:absolute;top:0;left:0;right:0;bottom:0}.rippleJS{display:block;overflow:hidden;border-radius:inherit;-webkit-mask-image:-webkit-radial-gradient(circle,#fff,#000)}.rippleJS.fill::after{content:\"\"}.rippleJS.fill{border-radius:1000000px}.rippleJS .ripple{position:absolute;border-radius:100%;background:currentColor;opacity:.2;width:0;height:0;-webkit-transition:-webkit-transform .4s ease-out,opacity .4s ease-out;transition:transform .4s ease-out,opacity .4s ease-out;-webkit-transform:scale(0);transform:scale(0);pointer-events:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.rippleJS .ripple.held{opacity:.4;-webkit-transform:scale(1);transform:scale(1)}.rippleJS .ripple.done{opacity:0}');\ndocument.addEventListener(\"mousedown\",function(a){0==a.button&&g(a.type,a)});document.addEventListener(\"touchstart\",function(a){for(var b=0;b<a.changedTouches.length;++b)g(a.type,a.changedTouches[b])})});\n","import \"./helpers/dom\";\n\nimport { setDefaultState, setupDates } from \"./setup\";\nimport { showTodaysEvents } from \"./fill-events\";\nimport { showNowBar } from \"./now-bar\";\nimport \"./details\";\nimport \"./highlight\";\nimport \"./navigation\";\nimport \"./calendars\";\n// import \"./zoom\";\nimport \"./../node_modules/vanilla-ripplejs/ripple.min\";\n\nsetDefaultState();\n\nsetupDates();\n\nshowTodaysEvents();\n\nshowNowBar();\n"]}